/*

 logger2js V1.0.7 Beautify Plugin
------------------------------------
  Beautify.js 
  
  Use by : yanjianzhong, <yjz_ok@163.com>
	  http://jskfs.googlecode.com
  
  Compressed by JSA(www.xidea.org), thinks!
 
 
 JS Beautifier
---------------
  Written by Einar Lielmanis, <einars@gmail.com>
      http://jsbeautifier.org/

  Originally converted to javascript by Vital, <vital76@gmail.com>

  You are free to use this in any way you want, in case you find this useful or working for you.

  Usage:
    js_beautify(js_source_text);
    js_beautify(js_source_text, options);

  The options are:
    indent_size (default 4) ！ indentation size,
    indent_char (default space) ！ character to indent with,
    preserve_newlines (default true) ！ whether existing line breaks should be preserved,
    indent_level (default 0)  ！ initial indentation level, you probably won't need this ever,

    space_after_anon_function (default false) ！ if true, then space is added between "function ()"
            (jslint is happy about this); if false, then the common "function()" output is used.

    e.g

    js_beautify(js_source_text, {indent_size: 1, indent_char: '\t'});


 Style HTML
---------------
  Written by Nochum Sossonko, (nsossonko@hotmail.com)

  Based on code initially developed by: Einar Lielmanis, <elfz@laacz.lv>
    http://jsbeautifier.org

  You are free to use this in any way you want, in case you find this useful or working for you.

  Usage:
    style_html(html_source);
 */
function js_beautify(C,S){var f,o,B,D,b,K,$,V,J,A,Z,P,j,p,d,Q,k,m,l,R,H,n;S=S||{};var a=S.indent_size||4,e=S.indent_char||" ",T=typeof S.preserve_newlines==="undefined"?true:S.preserve_newlines,c=S.indent_level||0,i=S.space_after_anon_function==="undefined"?false:S.space_after_anon_function;n=false;function G(){while(o.length&&(o[o.length-1]===" "||o[o.length-1]===A))o.pop()}function r($){$=typeof $==="undefined"?true:$;V.if_line=false;G();if(!o.length)return;if(o[o.length-1]!=="\n"||!$){n=true;o.push("\n")}for(var _=0;_<R;_+=1)o.push(A)}function N(){var $=" ";if(o.length)$=o[o.length-1];if($!==" "&&$!=="\n"&&$!==A)o.push(" ")}function q(){n=false;o.push(B)}function W(){R+=1}function F(){if(R)R-=1}function U(){if(o.length&&o[o.length-1]===A)o.pop()}function M(){var $=B.split("\n");o.push($[0]);for(var _=1;_<$.length;_++){r();o.push(" ");o.push($[_].replace(/^\s+/,""))}}function L($){if(V)J.push(V);V={mode:$,var_line:false,var_line_tainted:false,if_line:false,in_case:false}}function X($){return $==="[EXPRESSION]"||$==="[INDENTED-EXPRESSION]"||$==="(EXPRESSION)"}function _(){l=V.mode==="DO_BLOCK";V=J.pop()}function O(_,$){for(var A=0;A<$.length;A+=1)if($[A]===_)return true;return false}function g(){var _=0,$=0;for(var A=o.length-1;A>=0;A--)switch(o[A]){case":":if(_===0)$++;break;case"?":if(_===0)if($===0)return true;else $--;break;case"{":if(_===0)return false;_--;break;case"(":case"[":_--;break;case")":case"]":case"}":_++;break}}function I(){var K=0;if(p>=f.length)return["","TK_EOF"];var C=f.charAt(p);p+=1;while(O(C,Z)){if(p>=f.length)return["","TK_EOF"];if(C==="\n")K+=1;C=f.charAt(p);p+=1}H=false;if(T){if(K>1)for(var L=0;L<2;L+=1)r(L===0);H=(K===1)}if(O(C,P)){if(p<f.length)while(O(f.charAt(p),P)){C+=f.charAt(p);p+=1;if(p===f.length)break}if(p!==f.length&&C.match(/^[0-9]+[Ee]$/)&&(f.charAt(p)==="-"||f.charAt(p)==="+")){var $=f.charAt(p);p+=1;var _=I(p);C+=$+_[0];return[C,"TK_WORD"]}if(C==="in")return[C,"TK_OPERATOR"];if(H&&D!=="TK_OPERATOR"&&!V.if_line)r();return[C,"TK_WORD"]}if(C==="("||C==="[")return[C,"TK_START_EXPR"];if(C===")"||C==="]")return[C,"TK_END_EXPR"];if(C==="{")return[C,"TK_START_BLOCK"];if(C==="}")return[C,"TK_END_BLOCK"];if(C===";")return[C,"TK_SEMICOLON"];if(C==="/"){var J="";if(f.charAt(p)==="*"){p+=1;if(p<f.length)while(!(f.charAt(p)==="*"&&f.charAt(p+1)&&f.charAt(p+1)==="/")&&p<f.length){J+=f.charAt(p);p+=1;if(p>=f.length)break}p+=2;return["/*"+J+"*/","TK_BLOCK_COMMENT"]}if(f.charAt(p)==="/"){J=C;while(f.charAt(p)!=="\r"&&f.charAt(p)!=="\n"){J+=f.charAt(p);p+=1;if(p>=f.length)break}p+=1;if(H)r();return[J,"TK_COMMENT"]}}if(C==="'"||C==="\""||(C==="/"&&((D==="TK_WORD"&&O(b,["return","do"]))||(D==="TK_START_EXPR"||D==="TK_START_BLOCK"||D==="TK_END_BLOCK"||D==="TK_OPERATOR"||D==="TK_EOF"||D==="TK_SEMICOLON")))){var F=C,E=false,G=C;if(p<f.length)if(F==="/"){var B=false;while(E||B||f.charAt(p)!==F){G+=f.charAt(p);if(!E){E=f.charAt(p)==="\\";if(f.charAt(p)==="[")B=true;else if(f.charAt(p)==="]")B=false}else E=false;p+=1;if(p>=f.length)return[G,"TK_STRING"]}}else while(E||f.charAt(p)!==F){G+=f.charAt(p);if(!E)E=f.charAt(p)==="\\";else E=false;p+=1;if(p>=f.length)return[G,"TK_STRING"]}p+=1;G+=F;if(F==="/")while(p<f.length&&O(f.charAt(p),P)){G+=f.charAt(p);p+=1}return[G,"TK_STRING"]}if(C==="#"){var A="#";if(p<f.length&&O(f.charAt(p),Q)){do{C=f.charAt(p);A+=C;p+=1}while(p<f.length&&C!=="#"&&C!=="=");if(C==="#")return[A,"TK_WORD"];else return[A,"TK_OPERATOR"]}}if(C==="<"&&f.substring(p-1,p+3)==="<!--"){p+=3;return["<!--","TK_COMMENT"]}if(C==="-"&&f.substring(p-1,p+2)==="-->"){p+=2;if(H)r();return["-->","TK_COMMENT"]}if(O(C,j)){while(p<f.length&&O(C+f.charAt(p),j)){C+=f.charAt(p);p+=1;if(p>=f.length)break}return[C,"TK_OPERATOR"]}return[C,"TK_UNKNOWN"]}A="";while(a>0){A+=e;a-=1}R=c;f=C;$="";D="TK_START_EXPR";b="";K="";o=[];l=false;Z="\n\r\t ".split("");P="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split("");Q="0123456789".split("");j="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::".split(" ");d="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(",");J=[];L("BLOCK");p=0;while(true){var h=I(p);B=h[0];m=h[1];if(m==="TK_EOF")break;switch(m){case"TK_START_EXPR":if(B==="["){if(D==="TK_WORD"||b===")"){if($==="return"||$==="throw")N();L("(EXPRESSION)");q();break}if(V.mode==="[EXPRESSION]"||V.mode==="[INDENTED-EXPRESSION]"){if(K==="]"&&b===","){W();r();L("[INDENTED-EXPRESSION]")}else if(b==="["){W();r();L("[INDENTED-EXPRESSION]")}else L("[EXPRESSION]")}else L("[EXPRESSION]")}else L("(EXPRESSION)");if(b===";"||D==="TK_START_BLOCK")r();else if(D==="TK_END_EXPR"||D==="TK_START_EXPR");else if(D!=="TK_WORD"&&D!=="TK_OPERATOR")N();else if($==="function"){if(i)N()}else if(O($,d))N();q();break;case"TK_END_EXPR":if(B==="]"&&V.mode==="[INDENTED-EXPRESSION]")F();_();q();break;case"TK_START_BLOCK":if($==="do")L("DO_BLOCK");else L("BLOCK");if(D!=="TK_OPERATOR"&&D!=="TK_START_EXPR")if(D==="TK_START_BLOCK")r();else N();q();W();break;case"TK_END_BLOCK":if(D==="TK_START_BLOCK"){if(n)U();else G();F()}else{F();r()}q();_();break;case"TK_WORD":if(l){N();q();N();l=false;break}if(B==="function")if(b===";"||b==="}"){r(false);r(false)}if(B==="case"||B==="default"){if(b===":")U();else{F();r();W()}q();V.in_case=true;break}k="NONE";if(D==="TK_END_BLOCK"){if(!O(B.toLowerCase(),["else","catch","finally"]))k="NEWLINE";else{k="SPACE";N()}}else if(D==="TK_SEMICOLON"&&(V.mode==="BLOCK"||V.mode==="DO_BLOCK"))k="NEWLINE";else if(D==="TK_SEMICOLON"&&X(V.mode))k="SPACE";else if(D==="TK_STRING")k="NEWLINE";else if(D==="TK_WORD")k="SPACE";else if(D==="TK_START_BLOCK")k="NEWLINE";else if(D==="TK_END_EXPR"){N();k="NEWLINE"}if(D!=="TK_END_BLOCK"&&O(B.toLowerCase(),["else","catch","finally"]))r();else if(O(B,d)||k==="NEWLINE"){if(b==="else")N();else if((D==="TK_START_EXPR"||b==="="||b===",")&&B==="function");else if(b==="return"||b==="throw")N();else if(D!=="TK_END_EXPR"){if((D!=="TK_START_EXPR"||B!=="var")&&b!==":")if(B==="if"&&$==="else"&&b!=="{")N();else r()}else if(O(B,d)&&b!==")")r()}else if(k==="SPACE")N();q();$=B;if(B==="var"){V.var_line=true;V.var_line_tainted=false}if(B==="if"||B==="else")V.if_line=true;break;case"TK_SEMICOLON":q();V.var_line=false;break;case"TK_STRING":if(D==="TK_START_BLOCK"||D==="TK_END_BLOCK"||D==="TK_SEMICOLON")r();else if(D==="TK_WORD")N();q();break;case"TK_OPERATOR":var Y=true,E=true;if(V.var_line&&B===","&&(X(V.mode)))V.var_line_tainted=false;if(V.var_line)if(B===","){if(V.var_line_tainted){q();r();o.push(A);V.var_line_tainted=false;break}else V.var_line_tainted=false}else{V.var_line_tainted=true;if(B===":")V.var_line=false}if(b==="return"||b==="throw"){N();q();break}if(B===":"&&V.in_case){q();r();V.in_case=false;break}if(B==="::"){q();break}if(B===","){if(V.var_line){if(V.var_line_tainted){q();r();V.var_line_tainted=false}else{q();N()}}else if(D==="TK_END_BLOCK"){q();r()}else if(V.mode==="BLOCK"){q();r()}else{q();N()}break}else if(B==="--"||B==="++"){if(b===";"){if(V.mode==="BLOCK"){r();Y=true;E=false}else{Y=true;E=false}}else{if(b==="{")r();Y=false;E=false}}else if((B==="!"||B==="+"||B==="-")&&(b==="return"||b==="case")){Y=true;E=false}else if((B==="!"||B==="+"||B==="-")&&D==="TK_START_EXPR"){Y=false;E=false}else if(D==="TK_OPERATOR"){Y=false;E=false}else if(D==="TK_END_EXPR"){Y=true;E=true}else if(B==="."){Y=false;E=false}else if(B===":")if(g())Y=true;else Y=false;if(Y)N();q();if(E)N();break;case"TK_BLOCK_COMMENT":r();if(B.substring(0,3)=="/**")M();else q();r();break;case"TK_COMMENT":N();q();r();break;case"TK_UNKNOWN":q();break}K=b;D=m;b=B}return o.join("").replace(/\n+$/,"")}
function style_html(C,D,E,B){var $,A;function $(){this.pos=0;this.token="";this.current_mode="CONTENT";this.tags={parent:"parent1",parentcount:1,parent1:""};this.tag_type="";this.token_text=this.last_token=this.last_text=this.token_type="";this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed".split(","),extra_liners:"head,body,/html".split(","),in_array:function(_,$){for(var A=0;A<$.length;A++)if(_===$[A])return true;return false}};this.get_content=function(){var A="",$=[],_=false;while(this.input.charAt(this.pos)!=="<"){if(this.pos>=this.input.length)return $.length?$.join(""):["","TK_EOF"];A=this.input.charAt(this.pos);this.pos++;this.line_char_count++;if(this.Utils.in_array(A,this.Utils.whitespace)){if($.length)_=true;this.line_char_count--;continue}else if(_){if(this.line_char_count>=this.max_char){$.push("\n");for(var B=0;B<this.indent_level;B++)$.push(this.indent_string);this.line_char_count=0}else{$.push(" ");this.line_char_count++}_=false}$.push(A)}return $.length?$.join(""):""};this.get_script=function(){var C="",$=[],_=new RegExp("</script"+">","igm");_.lastIndex=this.pos;var B=_.exec(this.input),A=B?B.index:this.input.length;while(this.pos<A){if(this.pos>=this.input.length)return $.length?$.join(""):["","TK_EOF"];C=this.input.charAt(this.pos);this.pos++;$.push(C)}return $.length?$.join(""):""};this.record_tag=function($){if(this.tags[$+"count"]){this.tags[$+"count"]++;this.tags[$+this.tags[$+"count"]]=this.indent_level}else{this.tags[$+"count"]=1;this.tags[$+this.tags[$+"count"]]=this.indent_level}this.tags[$+this.tags[$+"count"]+"parent"]=this.tags.parent;this.tags.parent=$+this.tags[$+"count"]};this.retrieve_tag=function(_){if(this.tags[_+"count"]){var $=this.tags.parent;while($){if(_+this.tags[_+"count"]===$)break;$=this.tags[$+"parent"]}if($){this.indent_level=this.tags[_+this.tags[_+"count"]];this.tags.parent=this.tags[$+"parent"]}delete this.tags[_+this.tags[_+"count"]+"parent"];delete this.tags[_+this.tags[_+"count"]];if(this.tags[_+"count"]==1)delete this.tags[_+"count"];else this.tags[_+"count"]--}};this.get_tag=function(){var E="",_=[],D=false;do{if(this.pos>=this.input.length)return _.length?_.join(""):["","TK_EOF"];E=this.input.charAt(this.pos);this.pos++;this.line_char_count++;if(this.Utils.in_array(E,this.Utils.whitespace)){D=true;this.line_char_count--;continue}if(E==="'"||E==="\"")if(!_[1]||_[1]!=="!"){E+=this.get_unformatted(E);D=true}if(E==="=")D=false;if(_.length&&_[_.length-1]!=="="&&E!==">"&&D){if(this.line_char_count>=this.max_char){this.print_newline(false,_);this.line_char_count=0}else{_.push(" ");this.line_char_count++}D=false}_.push(E)}while(E!==">");var A=_.join(""),B;if(A.indexOf(" ")!=-1)B=A.indexOf(" ");else B=A.indexOf(">");var $=A.substring(1,B).toLowerCase();if(A.charAt(A.length-2)==="/"||this.Utils.in_array($,this.Utils.single_token))this.tag_type="SINGLE";else if($==="script"){this.record_tag($);this.tag_type="SCRIPT"}else if($==="style"){this.record_tag($);this.tag_type="STYLE"}else if($.charAt(0)==="!"){if($.indexOf("[if")!=-1){if(A.indexOf("!IE")!=-1){var C=this.get_unformatted("-->",A);_.push(C)}this.tag_type="START"}else if($.indexOf("[endif")!=-1){this.tag_type="END";this.unindent()}else if($.indexOf("[cdata[")!=-1){C=this.get_unformatted("]]>",A);_.push(C);this.tag_type="SINGLE"}else{C=this.get_unformatted("-->",A);_.push(C);this.tag_type="SINGLE"}}else{if($.charAt(0)==="/"){this.retrieve_tag($.substring(1));this.tag_type="END"}else{this.record_tag($);this.tag_type="START"}if(this.Utils.in_array($,this.Utils.extra_liners))this.print_newline(true,this.output)}return _.join("")};this.get_unformatted=function(_,B){if(B&&B.indexOf(_)!=-1)return"";var C="",$="",A=true;do{C=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(C,this.Utils.whitespace)){if(!A){this.line_char_count--;continue}if(C==="\n"||C==="\r"){$+="\n";for(var D=0;D<this.indent_level;D++)$+=this.indent_string;A=false;this.line_char_count=0;continue}}$+=C;this.line_char_count++;A=true}while($.indexOf(_)==-1);return $};this.get_token=function(){var _;if(this.last_token==="TK_TAG_SCRIPT"){var $=this.get_script();if(typeof $!=="string")return $;_=js_beautify($,{indent_size:this.indent_size,indent_char:this.indent_character,indent_level:this.indent_level});return[_,"TK_CONTENT"]}if(this.current_mode==="CONTENT"){_=this.get_content();if(typeof _!=="string")return _;else return[_,"TK_CONTENT"]}if(this.current_mode==="TAG"){_=this.get_tag();if(typeof _!=="string")return _;else{var A="TK_TAG_"+this.tag_type;return[_,A]}}};this.printer=function($,B,A,_){this.input=$||"";this.output=[];this.indent_character=B||" ";this.indent_string="";this.indent_size=A||2;this.indent_level=0;this.max_char=_||70;this.line_char_count=0;for(var C=0;C<this.indent_size;C++)this.indent_string+=this.indent_character;this.print_newline=function(A,$){this.line_char_count=0;if(!$||!$.length)return;if(!A)while(this.Utils.in_array($[$.length-1],this.Utils.whitespace))$.pop();$.push("\n");for(var _=0;_<this.indent_level;_++)$.push(this.indent_string)};this.print_token=function($){this.output.push($)};this.indent=function(){this.indent_level++};this.unindent=function(){if(this.indent_level>0)this.indent_level--}};return this}A=new $();A.printer(C,E,D,B);while(true){var _=A.get_token();A.token_text=_[0];A.token_type=_[1];if(A.token_type==="TK_EOF")break;switch(A.token_type){case"TK_TAG_START":case"TK_TAG_SCRIPT":case"TK_TAG_STYLE":A.print_newline(false,A.output);A.print_token(A.token_text);A.indent();A.current_mode="CONTENT";break;case"TK_TAG_END":A.print_newline(true,A.output);A.print_token(A.token_text);A.current_mode="CONTENT";break;case"TK_TAG_SINGLE":A.print_newline(false,A.output);A.print_token(A.token_text);A.current_mode="CONTENT";break;case"TK_CONTENT":if(A.token_text!==""){A.print_newline(false,A.output);A.print_token(A.token_text)}A.current_mode="TAG";break}A.last_token=A.token_type;A.last_text=A.token_text}return A.output.join("")}